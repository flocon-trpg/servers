# state table of message

| updatedText!=null | textUpdatedAt!=null | isSecret | altTextToSecret!=null | 状態                                                                         |
| ----------------- | ------------------- | -------- | --------------------- | ---------------------------------------------------------------------------- |
| false             | false               | false    | false                 | 常に公開されるメッセージであり、編集も削除も行われていない。                 |
| true              | true                | false    | false                 | 常に公開されるメッセージであり、編集された状態。                             |
| false             | true                | false    | false                 | 常に公開されるメッセージであり、削除された状態。                             |
| false             | false               | true     | true                  | 未公開状態のシークレットメッセージであり、編集も削除も行われていない。       |
| true              | true                | true     | true                  | 未公開状態のシークレットメッセージであり、編集された状態。                   |
| false             | true                | true     | true                  | シークレットメッセージが公開される前に削除された状態。[^1]                   |
| false             | false               | false    | true                  | シークレットメッセージを公開した状態。編集も削除も行われていない。           |
| true              | true                | false    | true                  | シークレットメッセージを公開し、編集された状態。公開と編集の順序は問わない。 |
| false             | true                | false    | true                  | シークレットメッセージが公開された後に削除された状態。[^1]                   |

これらのいずれにも属さない状態は未定義であり不正。

[^1]: これらを区別することで、シークレットメッセージを公開しないまま削除した場合はそのまま秘密にできる。
