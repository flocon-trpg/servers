{"version":3,"file":"room.js","sources":["../../src/entities-graphql/room.ts"],"sourcesContent":[null],"names":["isReadonlyNonEmptyArray","GlobalRoom","decodeDbState","Participant","convertToMaxLength100String","decodeDownOperation","Result","RoomOp","composeDownOperation","roomTemplate","stringifyState","toClientState","diff","toUpOperation","stringifyUpOperation","User","apply","toOtError","exactDbState","recordForEachAsync","update","nullableStringToParticipantRoleType","toDownOperation","Reference"],"mappings":"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"}