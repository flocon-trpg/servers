{"version":3,"file":"resolver.js","sources":["../../../../../../../src/graphql/resolvers/mutations/writePublicMessage/resolver.ts"],"sourcesContent":[null],"names":["__decorate","Field","MaxLength","ArgsType","WriteRoomPublicMessageFailureType","$free","$system","WritePublicMessageResolver","ensureAuthorizedUser","findRoomAndMyParticipant","WriteRoomPublicMessageFailureResultType","Spectator","isCharacterOwner","client","analyzeTextAndSetToEntity","RoomMessageSyntaxErrorType","entity","fixTextColor","RoomPubCh","ref","FileSourceTypeModule","createRoomPublicMessage","publishRoomEvent","Mutation","WriteRoomPublicMessageResult","Authorized","ENTRY","UseMiddleware","QueueMiddleware","RateLimitMiddleware","__param","Args","Ctx","PubSub","__metadata","PubSubEngine","Resolver"],"mappings":";;;;;;;;;;;;;;;;AAkDA,IAAM,sBAAsB,GAA5B,MAAM,sBAAsB,CAAA;CAwB3B;AAtBUA,gBAAA,CAAA;AADN,IAAAC,iBAAK,EAAE;;AACe,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,QAAA,EAAA,KAAA,CAAA,CAAA;AAIhBD,gBAAA,CAAA;AAFN,IAAAC,iBAAK,EAAE;IACPC,wBAAS,CAAC,KAAM,CAAC;;AACG,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,MAAA,EAAA,KAAA,CAAA,CAAA;AAIdF,gBAAA,CAAA;AAFN,IAAAC,iBAAK,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IACzBC,wBAAS,CAAC,EAAE,CAAC;;AACY,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA;AAGnBF,gBAAA,CAAA;AADN,IAAAC,iBAAK,EAAE;;AACmB,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,YAAA,EAAA,KAAA,CAAA,CAAA;AAGpBD,gBAAA,CAAA;AADN,IAAAC,iBAAK,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;AACE,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,aAAA,EAAA,KAAA,CAAA,CAAA;AAIrBD,gBAAA,CAAA;AAFN,IAAAC,iBAAK,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IACzBC,wBAAS,CAAC,IAAK,CAAC;;AACU,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,YAAA,EAAA,KAAA,CAAA,CAAA;AAGpBF,gBAAA,CAAA;IADNC,iBAAK,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,kBAAkB,EAAE,CAAC;;AAClC,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA;AAvBvB,sBAAsB,GAAAD,gBAAA,CAAA;AAD3B,IAAAG,oBAAQ;AACH,CAAA,EAAA,sBAAsB,CAwB3B;AAED,MAAM,eAAe,GAAG,CAAC,UAAkB,EAAE,WAAoB,KAAI;IACjE,QAAQ,UAAU;AACd,QAAA,KAAK,GAAG;AACR,QAAA,KAAK,GAAG;AACR,QAAA,KAAK,GAAG;AACR,QAAA,KAAK,GAAG;AACR,QAAA,KAAK,GAAG;AACR,QAAA,KAAK,GAAG;AACR,QAAA,KAAK,GAAG;AACR,QAAA,KAAK,GAAG;AACR,QAAA,KAAK,GAAG;AACR,QAAA,KAAK,IAAI;YACL,IAAI,WAAW,EAAE;gBACb,OAAOC,mEAAiC,CAAC,aAAa;;AAE1D,YAAA,OAAO,IAAI;AACf,QAAA,KAAKC,oBAAK;AACN,YAAA,OAAO,IAAI;AACf,QAAA,KAAKC,sBAAO;YACR,OAAOF,mEAAiC,CAAC,aAAa;AAC1D,QAAA;YACI,OAAOA,mEAAiC,CAAC,oBAAoB;;AAEzE,CAAC;AAGYG,kCAA0B,GAAhC,MAAM,0BAA0B,CAAA;IAItB,MAAA,kBAAkB,CACnB,IAA4B,EAC7B,OAAwB,EACrB,MAAoB,EAAA;AAE9B,QAAA,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU;AAClC,QAAA,MAAM,EAAE,GAAG,OAAO,CAAC,EAAE;AACrB,QAAA,MAAM,cAAc,GAAGC,0BAAoB,CAAC,OAAO,CAAC;AACpD,QAAA,MAAM,UAAU,GAAG,MAAMC,8BAAwB,CAAC;YAC9C,EAAE;YACF,OAAO,EAAE,cAAc,CAAC,OAAO;YAC/B,MAAM,EAAE,IAAI,CAAC,MAAM;AACtB,SAAA,CAAC;AACF,QAAA,IAAI,UAAU,IAAI,IAAI,EAAE;YACpB,OAAO;AACH,gBAAA,QAAQ,EAAEC,mDAAuC;gBACjD,WAAW,EAAEN,mEAAiC,CAAC,YAAY;aAC9D;;QAEL,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,GAAG,UAAU;AAC1C,QAAA,IAAI,EAAE,KAAK,SAAS,EAAE;YAClB,OAAO;AACH,gBAAA,QAAQ,EAAEM,mDAAuC;gBACjD,WAAW,EAAEN,mEAAiC,CAAC,cAAc;aAChE;;AAEL,QAAA,MAAM,qBAAqB,GAAG,eAAe,CAAC,UAAU,EAAE,EAAE,CAAC,IAAI,KAAKO,wBAAS,CAAC;AAChF,QAAA,IAAI,qBAAqB,IAAI,IAAI,EAAE;YAC/B,OAAO;AACH,gBAAA,QAAQ,EAAED,mDAAuC;gBACjD,WAAW,EAAEN,mEAAiC,CAAC,aAAa;aAC/D;;QAGL,IAAI,KAAK,GAA+B,SAAS;AACjD,QAAA,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,EAAE;AAC1B,YAAA,IACIQ,+BAAgB,CAAC;gBACb,WAAW,EAAE,EAAE,IAAI,EAAEC,qBAAM,EAAE,OAAO,EAAE,cAAc,CAAC,OAAO,EAAE;gBAC9D,WAAW,EAAE,IAAI,CAAC,WAAW;AAC7B,gBAAA,gBAAgB,EAAE,SAAS;AAC9B,aAAA,CAAC,KAAK,IAAI;gBAEX,KAAK,GAAG,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;;AAExD,QAAA,MAAM,YAAY,GAAG,MAAMC,+BAAyB,CAAC;AACjD,YAAA,IAAI,EAAE,YAAY;YAClB,UAAU,EAAE,IAAI,CAAC,IAAI;AACrB,YAAA,OAAO,EAAE,KAAK,IAAI,IAAI,GAAG,IAAI,GAAG,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE;AAC/D,YAAA,SAAS,EAAE,cAAc;AACzB,YAAA,IAAI,EAAE,SAAS;YACf,QAAQ,EAAE,IAAI,CAAC,QAAQ;AAC1B,SAAA,CAAC;AACF,QAAA,IAAI,YAAY,CAAC,OAAO,EAAE;YACtB,OAAO;AACH,gBAAA,QAAQ,EAAEC,sCAA0B;gBACpC,YAAY,EAAE,YAAY,CAAC,KAAK;aACnC;;AAEL,QAAA,MAAMC,QAAM,GAAG,YAAY,CAAC,KAAmB;QAC/CA,QAAM,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,IAAI,IAAI,GAAG,SAAS,GAAGC,kBAAY,CAAC,IAAI,CAAC,SAAS,CAAC;QACpF,IAAI,EAAE,GAAG,MAAM,EAAE,CAAC,OAAO,CAACC,gBAAS,EAAE,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC;AACxE,QAAA,IAAI,EAAE,IAAI,IAAI,EAAE;YACZ,EAAE,GAAG,IAAIA,gBAAS,CAAC,EAAE,GAAG,EAAE,UAAU,EAAE,CAAC;AACvC,YAAA,EAAE,CAAC,IAAI,GAAGC,QAAG,CAAC,IAAI,CAAC;AACnB,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC;;AAElB,QAAAH,QAAM,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU;AAEnC,QAAA,IAAI,KAAK,IAAI,IAAI,EAAE;AACf,YAAAA,QAAM,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW;AACtC,YAAAA,QAAM,CAAC,SAAS,GAAG,KAAK,CAAC,IAAI;AAC7B,YAAAA,QAAM,CAAC,cAAc,GAAG,KAAK,CAAC,SAAS;YACvCA,QAAM,CAAC,cAAc,GAAG,KAAK,CAAC,KAAK,EAAE,IAAI;AACzC,YAAAA,QAAM,CAAC,oBAAoB,GAAGI,mCAAoB,CAAC,eAAe,CAC9D,KAAK,CAAC,KAAK,EAAE,UAAU,CAC1B;YACDJ,QAAM,CAAC,sBAAsB,GAAG,KAAK,CAAC,aAAa,EAAE,IAAI;AACzD,YAAAA,QAAM,CAAC,4BAA4B,GAAGI,mCAAoB,CAAC,eAAe,CACtE,KAAK,CAAC,aAAa,EAAE,UAAU,CAClC;;AAGL,QAAAJ,QAAM,CAAC,SAAS,GAAGG,QAAG,CAAC,EAAE,CAAC;AAC1B,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,IAAI,EAAE;AACnC,QAAA,MAAM,EAAE,CAAC,eAAe,CAACH,QAAM,CAAC;AAEhC,QAAA,MAAM,MAAM,GAAsB,MAAMK,6BAAuB,CAAC;AAC5D,YAAA,GAAG,EAAEL,QAAM;YACX,UAAU;AACb,SAAA,CAAC;AAEF,QAAA,MAAM,OAAO,GAAkC;AAC3C,YAAA,IAAI,EAAE,sBAAsB;AAC5B,YAAA,MAAM,EAAE,UAAU,CAAC,cAAc,EAAE;YACnC,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,SAAS,EAAE,cAAc,CAAC,OAAO;AACjC,YAAA,SAAS,EAAE,SAAS;AACpB,YAAA,KAAK,EAAE,MAAM;SAChB;AAED,QAAA,MAAMM,sBAAgB,CAAC,MAAM,EAAE,OAAO,CAAC;AACvC,QAAA,OAAO,MAAM;;;AAtGJtB,gBAAA,CAAA;AAHZ,IAAAuB,oBAAQ,CAAC,MAAMC,wCAA4B,CAAC;IAC5CC,sBAAU,CAACC,WAAK,CAAC;AACjB,IAAAC,yBAAa,CAACC,+BAAe,EAAEC,uCAAmB,CAAC,CAAC,CAAC,CAAC;IAElDC,aAAA,CAAA,CAAA,EAAAC,gBAAI,EAAE,CAAA;IACND,aAAA,CAAA,CAAA,EAAAE,eAAG,EAAE,CAAA;IACLF,aAAA,CAAA,CAAA,EAAAG,kBAAM,EAAE,CAAA;;AAFK,IAAAC,gBAAA,CAAA,mBAAA,EAAA,CAAA,sBAAsB,UAElBC,wBAAY,CAAA,CAAA;;AAoGjC,CAAA,EAAA5B,kCAAA,CAAA,SAAA,EAAA,oBAAA,EAAA,IAAA,CAAA;AA3GQA,kCAA0B,GAAAP,gBAAA,CAAA;AADtC,IAAAoC,oBAAQ;AACI,CAAA,EAAA7B,kCAA0B,CA4GtC;;"}