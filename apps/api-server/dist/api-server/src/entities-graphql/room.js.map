{"version":3,"file":"room.js","sources":["../../../../src/entities-graphql/room.ts"],"sourcesContent":[null],"names":["isReadonlyNonEmptyArray","GlobalRoom","decodeDbState","Participant","convertToMaxLength100String","decodeDownOperation","Result","RoomOp","composeDownOperation","roomTemplate","stringifyState","toClientState","diff","toUpOperation","stringifyUpOperation","User","apply","toOtError","exactDbState","recordForEachAsync","update","nullableStringToParticipantRoleType","toDownOperation","ref"],"mappings":"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"}