{"version":3,"file":"resolver.js","sources":["../../../../../src/graphql/resolvers/mutations/joinRoom/resolver.ts"],"sourcesContent":[null],"names":["__decorate","Field","RoomOperation","ObjectType","JoinRoomFailureType","createUnionType","ArgsType","ensureAuthorizedUser","findRoomAndMyParticipant","operateParticipantAndFlush","convertToMaxLength100String","JoinRoomResolver","bcryptCompareNullable","Player","publishRoomEvent","Spectator","Mutation","Authorized","ENTRY","UseMiddleware","QueueMiddleware","RateLimitMiddleware","__param","Args","Ctx","PubSub","__metadata","PubSubEngine","Resolver"],"mappings":";;;;;;;;;;;;;AAmCA,IAAM,qBAAqB,GAA3B,MAAM,qBAAqB,CAAA;CAG1B,CAAA;AAFGA,gBAAA,CAAA;AAAC,IAAAC,iBAAK,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;oCACPC,kBAAa,CAAA;AAAC,CAAA,EAAA,qBAAA,CAAA,SAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAF/B,qBAAqB,GAAAF,gBAAA,CAAA;AAD1B,IAAAG,sBAAU,EAAE;AACP,CAAA,EAAA,qBAAqB,CAG1B,CAAA;AAGD,IAAM,qBAAqB,GAA3B,MAAM,qBAAqB,CAAA;CAG1B,CAAA;AAFGH,gBAAA,CAAA;AAAC,IAAAC,iBAAK,CAAC,MAAMG,uCAAmB,CAAC;;AACQ,CAAA,EAAA,qBAAA,CAAA,SAAA,EAAA,aAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAFvC,qBAAqB,GAAAJ,gBAAA,CAAA;AAD1B,IAAAG,sBAAU,EAAE;AACP,CAAA,EAAA,qBAAqB,CAG1B,CAAA;AAEM,MAAM,cAAc,GAAGE,2BAAe,CAAC;AAC1C,IAAA,IAAI,EAAE,gBAAgB;IACtB,KAAK,EAAE,MAAM,CAAC,qBAAqB,EAAE,qBAAqB,CAAU;IACpE,WAAW,EAAE,KAAK,IAAG;QACjB,IAAI,WAAW,IAAI,KAAK,EAAE;AACtB,YAAA,OAAO,qBAAqB,CAAC;AAChC,SAAA;QACD,IAAI,aAAa,IAAI,KAAK,EAAE;AACxB,YAAA,OAAO,qBAAqB,CAAC;AAChC,SAAA;AACD,QAAA,OAAO,SAAS,CAAC;KACpB;AACJ,CAAA,EAAE;AAGH,IAAM,YAAY,GAAlB,MAAM,YAAY,CAAA;CASjB,CAAA;AARGL,gBAAA,CAAA;AAAC,IAAAC,iBAAK,EAAE;;AACW,CAAA,EAAA,YAAA,CAAA,SAAA,EAAA,IAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAEnBD,gBAAA,CAAA;AAAC,IAAAC,iBAAK,EAAE;;AACa,CAAA,EAAA,YAAA,CAAA,SAAA,EAAA,MAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAErBD,gBAAA,CAAA;AAAC,IAAAC,iBAAK,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;AACD,CAAA,EAAA,YAAA,CAAA,SAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AARvB,YAAY,GAAAD,gBAAA,CAAA;AADjB,IAAAM,oBAAQ,EAAE;AACL,CAAA,EAAA,YAAY,CASjB,CAAA;AAED,MAAM,YAAY,GAAG,OAAO,EACxB,IAAI,EACJ,OAAO,EACP,QAAQ,GAeX,KAAuF;AACpF,IAAA,MAAM,EAAE,GAAG,OAAO,CAAC,EAAE,CAAC;AACtB,IAAA,MAAM,cAAc,GAAGC,0BAAoB,CAAC,OAAO,CAAC,CAAC;AACrD,IAAA,MAAM,UAAU,GAAG,MAAMC,8BAAwB,CAAC;QAC9C,EAAE;QACF,OAAO,EAAE,cAAc,CAAC,OAAO;QAC/B,MAAM,EAAE,IAAI,CAAC,EAAE;AAClB,KAAA,CAAC,CAAC;IACH,IAAI,UAAU,IAAI,IAAI,EAAE;QACpB,OAAO;AACH,YAAA,MAAM,EAAE;gBACJ,WAAW,EAAEJ,uCAAmB,CAAC,QAAQ;AAC5C,aAAA;AACD,YAAA,OAAO,EAAE,SAAS;SACrB,CAAC;AACL,KAAA;AACD,IAAA,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,UAAU,CAAC;AAChC,IAAA,MAAM,mBAAmB,GAAG,UAAU,CAAC,cAAc,EAAE,CAAC;AACxD,IAAA,MAAM,cAAc,GAAG,MAAM,QAAQ,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;AAC1D,IAAA,QAAQ,cAAc;QAClB,KAAK,IAAI,EAAE;YACP,OAAO;AACH,gBAAA,MAAM,EAAE;AACJ,oBAAA,SAAS,EAAE,SAAS;AACvB,iBAAA;AACD,gBAAA,OAAO,EAAE,SAAS;aACrB,CAAC;AACL,SAAA;AACD,QAAA,KAAKA,uCAAmB,CAAC,aAAa,EAAE;YACpC,OAAO;AACH,gBAAA,MAAM,EAAE;oBACJ,WAAW,EAAEA,uCAAmB,CAAC,aAAa;AACjD,iBAAA;AACD,gBAAA,OAAO,EAAE,SAAS;aACrB,CAAC;AACL,SAAA;AACD,QAAA,KAAKA,uCAAmB,CAAC,kBAAkB,EAAE;YACzC,OAAO;AACH,gBAAA,MAAM,EAAE;oBACJ,WAAW,EAAEA,uCAAmB,CAAC,kBAAkB;AACtD,iBAAA;AACD,gBAAA,OAAO,EAAE,SAAS;aACrB,CAAC;AACL,SAAA;AACD,QAAA,SAAS;YACL,OAAO,MAAMK,gCAA0B,CAAC;gBACpC,EAAE;gBACF,IAAI;AACJ,gBAAA,aAAa,EAAE,OAAO,CAAC,YAAY,CAAC,aAAa;gBACjD,mBAAmB;gBACnB,SAAS,EAAE,cAAc,CAAC,OAAO;AACjC,gBAAA,MAAM,EAAE;AACJ,oBAAA,IAAI,EAAEC,uDAA2B,CAAC,IAAI,CAAC,IAAI,CAAC;AAC5C,oBAAA,IAAI,EAAE,cAAc;AACvB,iBAAA;AACD,gBAAA,MAAM,EAAE;AACJ,oBAAA,IAAI,EAAE,EAAE,QAAQ,EAAE,cAAc,EAAE;AACrC,iBAAA;AACJ,aAAA,CAAC,CAAC;AACN,SAAA;AACJ,KAAA;AACL,CAAC,CAAC;AAGWC,wBAAgB,GAAtB,MAAM,gBAAgB,CAAA;IAIZ,MAAA,gBAAgB,CACjB,IAAkB,EACnB,OAAwB,EACrB,MAAoB,EAAA;QAE9B,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,YAAY,CAAC;YAC3C,IAAI;YACJ,OAAO;YACP,QAAQ,EAAE,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,KAAI;gBAC7B,IAAI,EAAE,IAAI,IAAI,EAAE;oBACZ,QAAQ,EAAE,CAAC,IAAI;AACX,wBAAA,KAAK,SAAS;4BACV,MAAM;AACV,wBAAA;4BACI,OAAOP,uCAAmB,CAAC,kBAAkB,CAAC;AACrD,qBAAA;AACJ,iBAAA;AACD,gBAAA,IAAI,EAAE,MAAMQ,2BAAqB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC,EAAE;oBACxE,OAAOR,uCAAmB,CAAC,aAAa,CAAC;AAC5C,iBAAA;AACD,gBAAA,OAAOS,qBAAM,CAAC;aACjB;AACJ,SAAA,CAAC,CAAC;QACH,IAAI,OAAO,IAAI,IAAI,EAAE;AACjB,YAAA,MAAMC,sBAAgB,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;AAC3C,SAAA;AACD,QAAA,OAAO,MAAM,CAAC;KACjB;IAKY,MAAA,mBAAmB,CACpB,IAAkB,EACnB,OAAwB,EACrB,MAAoB,EAAA;QAE9B,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,YAAY,CAAC;YAC3C,IAAI;YACJ,OAAO;YACP,QAAQ,EAAE,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,KAAI;gBAC7B,IAAI,EAAE,IAAI,IAAI,EAAE;oBACZ,QAAQ,EAAE,CAAC,IAAI;AACX,wBAAA,KAAK,SAAS;4BACV,MAAM;AACV,wBAAA;4BACI,OAAOV,uCAAmB,CAAC,kBAAkB,CAAC;AACrD,qBAAA;AACJ,iBAAA;AACD,gBAAA,IAAI,EAAE,MAAMQ,2BAAqB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC,EAAE;oBAC3E,OAAOR,uCAAmB,CAAC,aAAa,CAAC;AAC5C,iBAAA;AACD,gBAAA,OAAOW,wBAAS,CAAC;aACpB;AACJ,SAAA,CAAC,CAAC;QACH,IAAI,OAAO,IAAI,IAAI,EAAE;AACjB,YAAA,MAAMD,sBAAgB,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;AAC3C,SAAA;AACD,QAAA,OAAO,MAAM,CAAC;KACjB;EACJ;AA5DgBd,gBAAA,CAAA;AAHZ,IAAAgB,oBAAQ,CAAC,MAAM,cAAc,CAAC;IAC9BC,sBAAU,CAACC,WAAK,CAAC;AACjB,IAAAC,yBAAa,CAACC,+BAAe,EAAEC,uCAAmB,CAAC,CAAC,CAAC,CAAC;IAElDC,aAAA,CAAA,CAAA,EAAAC,gBAAI,EAAE,CAAA;IACND,aAAA,CAAA,CAAA,EAAAE,eAAG,EAAE,CAAA;IACLF,aAAA,CAAA,CAAA,EAAAG,kBAAM,EAAE,CAAA;;AAFK,IAAAC,gBAAA,CAAA,mBAAA,EAAA,CAAA,YAAY,UAERC,wBAAY,CAAA,CAAA;;AAwBjC,CAAA,EAAAhB,wBAAA,CAAA,SAAA,EAAA,kBAAA,EAAA,IAAA,CAAA,CAAA;AAKYX,gBAAA,CAAA;AAHZ,IAAAgB,oBAAQ,CAAC,MAAM,cAAc,CAAC;IAC9BC,sBAAU,CAACC,WAAK,CAAC;AACjB,IAAAC,yBAAa,CAACC,+BAAe,EAAEC,uCAAmB,CAAC,CAAC,CAAC,CAAC;IAElDC,aAAA,CAAA,CAAA,EAAAC,gBAAI,EAAE,CAAA;IACND,aAAA,CAAA,CAAA,EAAAE,eAAG,EAAE,CAAA;IACLF,aAAA,CAAA,CAAA,EAAAG,kBAAM,EAAE,CAAA;;AAFK,IAAAC,gBAAA,CAAA,mBAAA,EAAA,CAAA,YAAY,UAERC,wBAAY,CAAA,CAAA;;AAwBjC,CAAA,EAAAhB,wBAAA,CAAA,SAAA,EAAA,qBAAA,EAAA,IAAA,CAAA,CAAA;AA/DQA,wBAAgB,GAAAX,gBAAA,CAAA;AAD5B,IAAA4B,oBAAQ,EAAE;AACE,CAAA,EAAAjB,wBAAgB,CAgE5B;;;;"}