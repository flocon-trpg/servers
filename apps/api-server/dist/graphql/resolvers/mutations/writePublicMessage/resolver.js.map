{"version":3,"file":"resolver.js","sources":["../../../../../src/graphql/resolvers/mutations/writePublicMessage/resolver.ts"],"sourcesContent":[null],"names":["__decorate","Field","MaxLength","ArgsType","WriteRoomPublicMessageFailureType","$free","$system","WritePublicMessageResolver","ensureAuthorizedUser","findRoomAndMyParticipant","WriteRoomPublicMessageFailureResultType","Spectator","isCharacterOwner","client","analyzeTextAndSetToEntity","RoomMessageSyntaxErrorType","entity","fixTextColor","RoomPubCh","Reference","FileSourceTypeModule","createRoomPublicMessage","publishRoomEvent","Mutation","WriteRoomPublicMessageResult","Authorized","ENTRY","UseMiddleware","QueueMiddleware","RateLimitMiddleware","__param","Args","Ctx","PubSub","__metadata","PubSubEngine","Resolver"],"mappings":";;;;;;;;;;;;;;;;AAkDA,IAAM,sBAAsB,GAA5B,MAAM,sBAAsB,CAAA;CAwB3B,CAAA;AAvBGA,gBAAA,CAAA;AAAC,IAAAC,iBAAK,EAAE;;AACe,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,QAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAEvBD,gBAAA,CAAA;AAAC,IAAAC,iBAAK,EAAE;IACPC,wBAAS,CAAC,KAAM,CAAC;;AACG,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,MAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAErBF,gBAAA,CAAA;AAAC,IAAAC,iBAAK,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IACzBC,wBAAS,CAAC,EAAE,CAAC;;AACY,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,WAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAE1BF,gBAAA,CAAA;AAAC,IAAAC,iBAAK,EAAE;;AACmB,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,YAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAE3BD,gBAAA,CAAA;AAAC,IAAAC,iBAAK,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;;AACE,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,aAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAE5BD,gBAAA,CAAA;AAAC,IAAAC,iBAAK,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IACzBC,wBAAS,CAAC,IAAK,CAAC;;AACU,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,YAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAE3BF,gBAAA,CAAA;IAACC,iBAAK,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,kBAAkB,EAAE,CAAC;;AAClC,CAAA,EAAA,sBAAA,CAAA,SAAA,EAAA,UAAA,EAAA,KAAA,CAAA,CAAA,CAAA;AAvBvB,sBAAsB,GAAAD,gBAAA,CAAA;AAD3B,IAAAG,oBAAQ,EAAE;AACL,CAAA,EAAA,sBAAsB,CAwB3B,CAAA;AAED,MAAM,eAAe,GAAG,CAAC,UAAkB,EAAE,WAAoB,KAAI;AACjE,IAAA,QAAQ,UAAU;AACd,QAAA,KAAK,GAAG,CAAC;AACT,QAAA,KAAK,GAAG,CAAC;AACT,QAAA,KAAK,GAAG,CAAC;AACT,QAAA,KAAK,GAAG,CAAC;AACT,QAAA,KAAK,GAAG,CAAC;AACT,QAAA,KAAK,GAAG,CAAC;AACT,QAAA,KAAK,GAAG,CAAC;AACT,QAAA,KAAK,GAAG,CAAC;AACT,QAAA,KAAK,GAAG,CAAC;AACT,QAAA,KAAK,IAAI;AACL,YAAA,IAAI,WAAW,EAAE;gBACb,OAAOC,mEAAiC,CAAC,aAAa,CAAC;AAC1D,aAAA;AACD,YAAA,OAAO,IAAI,CAAC;AAChB,QAAA,KAAKC,oBAAK;AACN,YAAA,OAAO,IAAI,CAAC;AAChB,QAAA,KAAKC,sBAAO;YACR,OAAOF,mEAAiC,CAAC,aAAa,CAAC;AAC3D,QAAA;YACI,OAAOA,mEAAiC,CAAC,oBAAoB,CAAC;AACrE,KAAA;AACL,CAAC,CAAC;AAGWG,kCAA0B,GAAhC,MAAM,0BAA0B,CAAA;IAItB,MAAA,kBAAkB,CACnB,IAA4B,EAC7B,OAAwB,EACrB,MAAoB,EAAA;AAE9B,QAAA,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;AACnC,QAAA,MAAM,EAAE,GAAG,OAAO,CAAC,EAAE,CAAC;AACtB,QAAA,MAAM,cAAc,GAAGC,0BAAoB,CAAC,OAAO,CAAC,CAAC;AACrD,QAAA,MAAM,UAAU,GAAG,MAAMC,8BAAwB,CAAC;YAC9C,EAAE;YACF,OAAO,EAAE,cAAc,CAAC,OAAO;YAC/B,MAAM,EAAE,IAAI,CAAC,MAAM;AACtB,SAAA,CAAC,CAAC;QACH,IAAI,UAAU,IAAI,IAAI,EAAE;YACpB,OAAO;AACH,gBAAA,QAAQ,EAAEC,mDAAuC;gBACjD,WAAW,EAAEN,mEAAiC,CAAC,YAAY;aAC9D,CAAC;AACL,SAAA;QACD,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,GAAG,UAAU,CAAC;QAC3C,IAAI,EAAE,KAAK,SAAS,EAAE;YAClB,OAAO;AACH,gBAAA,QAAQ,EAAEM,mDAAuC;gBACjD,WAAW,EAAEN,mEAAiC,CAAC,cAAc;aAChE,CAAC;AACL,SAAA;AACD,QAAA,MAAM,qBAAqB,GAAG,eAAe,CAAC,UAAU,EAAE,EAAE,CAAC,IAAI,KAAKO,wBAAS,CAAC,CAAC;QACjF,IAAI,qBAAqB,IAAI,IAAI,EAAE;YAC/B,OAAO;AACH,gBAAA,QAAQ,EAAED,mDAAuC;gBACjD,WAAW,EAAEN,mEAAiC,CAAC,aAAa;aAC/D,CAAC;AACL,SAAA;QAED,IAAI,KAAK,GAA+B,SAAS,CAAC;AAClD,QAAA,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,EAAE;AAC1B,YAAA,IACIQ,+BAAgB,CAAC;gBACb,WAAW,EAAE,EAAE,IAAI,EAAEC,qBAAM,EAAE,OAAO,EAAE,cAAc,CAAC,OAAO,EAAE;gBAC9D,WAAW,EAAE,IAAI,CAAC,WAAW;AAC7B,gBAAA,gBAAgB,EAAE,SAAS;aAC9B,CAAC;gBAEF,KAAK,GAAG,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;AACxD,SAAA;AACD,QAAA,MAAM,YAAY,GAAG,MAAMC,+BAAyB,CAAC;AACjD,YAAA,IAAI,EAAE,YAAY;YAClB,UAAU,EAAE,IAAI,CAAC,IAAI;AACrB,YAAA,OAAO,EAAE,KAAK,IAAI,IAAI,GAAG,IAAI,GAAG,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE;AAC/D,YAAA,SAAS,EAAE,cAAc;AACzB,YAAA,IAAI,EAAE,SAAS;YACf,QAAQ,EAAE,IAAI,CAAC,QAAQ;AAC1B,SAAA,CAAC,CAAC;QACH,IAAI,YAAY,CAAC,OAAO,EAAE;YACtB,OAAO;AACH,gBAAA,QAAQ,EAAEC,sCAA0B;gBACpC,YAAY,EAAE,YAAY,CAAC,KAAK;aACnC,CAAC;AACL,SAAA;AACD,QAAA,MAAMC,QAAM,GAAG,YAAY,CAAC,KAAmB,CAAC;QAChDA,QAAM,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,IAAI,IAAI,GAAG,SAAS,GAAGC,kBAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACrF,IAAI,EAAE,GAAG,MAAM,EAAE,CAAC,OAAO,CAACC,gBAAS,EAAE,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;QACzE,IAAI,EAAE,IAAI,IAAI,EAAE;YACZ,EAAE,GAAG,IAAIA,gBAAS,CAAC,EAAE,GAAG,EAAE,UAAU,EAAE,CAAC,CAAC;YACxC,EAAE,CAAC,IAAI,GAAGC,cAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACjC,YAAA,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;AAClB,SAAA;AACD,QAAAH,QAAM,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QAEpC,IAAI,KAAK,IAAI,IAAI,EAAE;AACf,YAAAA,QAAM,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC;AACvC,YAAAA,QAAM,CAAC,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC;AAC9B,YAAAA,QAAM,CAAC,cAAc,GAAG,KAAK,CAAC,SAAS,CAAC;YACxCA,QAAM,CAAC,cAAc,GAAG,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC;AAC1C,YAAAA,QAAM,CAAC,oBAAoB,GAAGI,mCAAoB,CAAC,eAAe,CAC9D,KAAK,CAAC,KAAK,EAAE,UAAU,CAC1B,CAAC;YACFJ,QAAM,CAAC,sBAAsB,GAAG,KAAK,CAAC,aAAa,EAAE,IAAI,CAAC;AAC1D,YAAAA,QAAM,CAAC,4BAA4B,GAAGI,mCAAoB,CAAC,eAAe,CACtE,KAAK,CAAC,aAAa,EAAE,UAAU,CAClC,CAAC;AACL,SAAA;QAEDJ,QAAM,CAAC,SAAS,GAAGG,cAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AACxC,QAAA,IAAI,CAAC,iBAAiB,GAAG,IAAI,IAAI,EAAE,CAAC;AACpC,QAAA,MAAM,EAAE,CAAC,eAAe,CAACH,QAAM,CAAC,CAAC;AAEjC,QAAA,MAAM,MAAM,GAAsBK,6BAAuB,CAAC,EAAE,GAAG,EAAEL,QAAM,EAAE,UAAU,EAAE,CAAC,CAAC;AAEvF,QAAA,MAAM,OAAO,GAAkC;AAC3C,YAAA,IAAI,EAAE,sBAAsB;AAC5B,YAAA,MAAM,EAAE,UAAU,CAAC,cAAc,EAAE;YACnC,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,SAAS,EAAE,cAAc,CAAC,OAAO;AACjC,YAAA,SAAS,EAAE,SAAS;AACpB,YAAA,KAAK,EAAE,MAAM;SAChB,CAAC;AAEF,QAAA,MAAMM,sBAAgB,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;AACxC,QAAA,OAAO,MAAM,CAAC;KACjB;EACJ;AArGgBtB,gBAAA,CAAA;AAHZ,IAAAuB,oBAAQ,CAAC,MAAMC,wCAA4B,CAAC;IAC5CC,sBAAU,CAACC,WAAK,CAAC;AACjB,IAAAC,yBAAa,CAACC,+BAAe,EAAEC,uCAAmB,CAAC,CAAC,CAAC,CAAC;IAElDC,aAAA,CAAA,CAAA,EAAAC,gBAAI,EAAE,CAAA;IACND,aAAA,CAAA,CAAA,EAAAE,eAAG,EAAE,CAAA;IACLF,aAAA,CAAA,CAAA,EAAAG,kBAAM,EAAE,CAAA;;AAFK,IAAAC,gBAAA,CAAA,mBAAA,EAAA,CAAA,sBAAsB,UAElBC,wBAAY,CAAA,CAAA;;AAiGjC,CAAA,EAAA5B,kCAAA,CAAA,SAAA,EAAA,oBAAA,EAAA,IAAA,CAAA,CAAA;AAxGQA,kCAA0B,GAAAP,gBAAA,CAAA;AADtC,IAAAoC,oBAAQ,EAAE;AACE,CAAA,EAAA7B,kCAA0B,CAyGtC;;"}