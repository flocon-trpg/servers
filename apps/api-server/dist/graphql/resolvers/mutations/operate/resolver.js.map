{"version":3,"file":"resolver.js","sources":["../../../../../src/graphql/resolvers/mutations/operate/resolver.ts"],"sourcesContent":[null],"names":["RoomOperationInput","__decorate","Field","MaxLength","InputType","Int","ArgsType","RoomOperation","ObjectType","RoomAsListItem","OperateRoomFailureType","createUnionType","ensureAuthorizedUser","findRoomAndMyParticipant","RoomAsListItemGlobal.stateToGraphQL","parseUpOperation","GlobalRoom","toOtError","restore","roomTemplate","serverTransform","client","createLogs","entity","DicePieceLog$MikroORM","StringPieceLog$MikroORM","DicePieceLogNameSpace","StringPieceLogNameSpace","OperateResolver","publishRoomEvent","Mutation","Authorized","ENTRY","UseMiddleware","QueueMiddleware","RateLimitMiddleware","__param","Args","Ctx","PubSub","__metadata","PubSubEngine","Resolver"],"mappings":"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"}